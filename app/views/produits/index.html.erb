<% if user_signed_in? %>

<h1 class="fa-solid fa-shirt fa-2xl fw-bold fs-1"> - Produits</h1>   
<hr/> 

  <table class="table table-striped table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Image</th>
        <th>Description</th>
        <th>Prix</th>
        <th>Taille</th>
        <th>update</th>
        <th>Ajout commande</th>
      </tr>
    </thead>

    <tbody>
    <% @produits.each do |produit| %>
          <tr>

            <td> <%= produit.id %>    </td>
            <td> <%= link_to produit.nom, produit %> </td>
            <td>
            <% if produit.image.attached? %> 
               <%= image_tag produit.image, style: "width: 50px; display: block" %>
            <% end %>
            </td>
           <td> <%= produit.description %>    </td>
           <td> <%= produit.prix %>    </td>
           <td> <%= produit.taille %>    </td>
           <td> <%= produit.updated_at %>    </td>

            <td>  
              <%# ouvrir un nouvel item au clic sur ajouter produit à la commmande 
               ok - passer en parametres l'id du produit selectionner
                  - grace à cet id, recuperer les informations sur le produit et les inserer dans le formulaire new item
                    --> code dans la view de new item
               %>

                <% unless @commande.nil? %>

                    <%= link_to "ajouter à une commande", new_item_path(produit_id: produit.id, commande_id: @commande.id), method: :post, class:"btn btn-primary" %>
                <% end %>
             </td>            

          </tr>

    <% end %>

    </tbody>
  </table>


<% end %>
